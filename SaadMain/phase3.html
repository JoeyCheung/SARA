<!DOCTYPE html>
<html>
  <head>
    <title>Saad Faruque</title>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0">
    <meta name="description" content="home">
    <meta name="author" content="kodeWeave">
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <link rel="stylesheet" href="libraries/alertifyjs/css/alertify.min.css" />
      <link rel="stylesheet" href="libraries/alertifyjs/css/themes/default.min.css" />
      <script src="libraries/alertifyjs/alertify.min.js"></script>
    <link rel="stylesheet" href="libraries/bootstrap/bootstrap.css" />
      <script src="libraries/bootstrap/bootstrap.js"></script>
    <script src="libraries/jquery/jquery.js"></script>
      <script src="libraries/jquery/jquery-migrate-1.2.1.min.js"></script>
    <link rel="stylesheet" href="libraries/font-awesome/font-awesome.css" />
    <link rel="stylesheet" href="libraries/font-awesome/macset.css" />
    <link rel="stylesheet" href="css/sara.css" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <!---jQuery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!---BootStrap Core-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <!---Nav Shrink-->
    <script src="js/navShrink.js"></script>
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>
  </head>
  <body>

<!DOCTYPE html>
<html lang="en">
<title>W3.CSS Template</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="shortcut icon" type="image/png" src='../images/star.png'>
<body>
 


<!-- Header -->


<!---NavBar--->

<header class="main-header" style="font-family:'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;font-size:16px;font-style:italic; padding:100px 5px" id= "page-top">
        <h1 align="center"><font color= "white";><b>Upload and Download</b></font></h1>
</header>
<nav id="mainNav" class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i>
            </button>
            <a class="navbar-brand page-scroll" href="saraHome.html"><font color= #708090; size="6">SARA</font></a>
        </div>
  
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li class="hidden">
                    <a href="#page-top"></a>
                </li>
                <li class="nav-item dropdown">
                      <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          <font color= #708090;>Course</font>
                      </a>
                      <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <a class="dropdown-item" href="https://www.zybooks.com/"><font color = yellow;>Zybooks</font></a><br>
                        <a class="dropdown-item" href="https://www.w3schools.com/"><font color = yellow;>W3-Schools</font></a>
                      </div>
                    </li>
                    <li class="nav-item dropdown">
                          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                              <font color= #708090;>Search</font>
                          </a>
                          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <a class="dropdown-item" href="search.html"><font color = yellow;>Google Search</font></a><br>
                            <a class="dropdown-item" href="ownDisplay.html"><font color = yellow;>Own Display</font></a>
                            <a class="dropdown-item" href="phase3.html"><font color = yellow;>Upload/Download</font></a>
                          </div>
                        </li>
                <li>
                    <a class="page-scroll" href="browser.html"><font color= #708090;>Browser</font></a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <font color= #708090;>About</font>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                      <a class="dropdown-item" href="http://www.saadfaruque.com"><font color = yellow;>Saad's Page</font></a>
                      <a class="dropdown-item" href="https://JoeyCheung.github.io"><font color = yellow;>Joey's Page</font></a>
                    </div>
                  </li>
            </ul>
        </div>
        </div>
        </nav>


    
      <div class="search-results">
        <div class="header">
            <h1>From File Results</h1>
        </div>
        <br>
        
        <h3 style="text-align:center">Select Results</h3>
        
        <table id="sTable">
              <tr id="p3r1" class="r3">
                 <td class="sCell3"><input type="checkbox" onclick="selectR('p3r1')"><p>Bengali Science and Technology</p></td>
                 <td class="sCell3"><a href="https://www.anandabazar.com/others/science" style="color:blue">https://www.anandabazar.com/others/science</a></td>
                 <td class="sCell3">Science, Technology, Gadgets, and Breaking News of Bangladesh</td>
              </tr>
              
              <tr id="p3r2" class="r3">
                 <td class="sCell3"><input type="checkbox" onclick="selectR('p3r2')"><p>Bengali Culture</p></td>
                 <td class="sCell3"><a href="https://en.wikipedia.org/wiki/Culture_of_Bengal" style="color:blue">https://en.wikipedia.org/wiki/Culture_of_Bengal</td>
                 <td class="sCell3">The Culture of the Bengal People</td>
              </tr>
              
              <tr id="p3r3" class="r3">
                 <td class="sCell3"><input type="checkbox" onclick="selectR('p3r3')"><p>Bengali Traditions</p></td>
                 <td class="sCell3"><a href="https://www.somewherelost.com/16-bengali-traditions-that-one-doesnt-know/" style="color:blue">https://www.somewherelost.com/16-bengali-traditions-that-one-doesnt-know/</td>
                 <td class="sCell3">16 Bengali Traditions One doesn't Know</td>
              </tr>
              
              <tr id="p3r4" class="r3">
                 <td class="sCell3"><input type="checkbox" onclick="selectR('p3r4')"><p>Bengali Introduction and Guide</p></td>
                 <td class="sCell3"><a href="https://www.everyculture.com/wc/Afghanistan-to-Bosnia-Herzegovina/Bengalis.html" style="color:blue">https://www.everyculture.com/wc/Afghanistan-to-Bosnia-Herzegovina/Bengalis.html</td>
                 <td class="sCell3">Learn About Bengali's, from their Language to their Culture!</td>
              </tr>
              
              <tr id="p3r5" class="r3">
                 <td class="sCell3"><input type="checkbox" onclick="selectR('p3r5')"><p>Bengali Politics</p></td>
                 <td class="sCell3"><a href="https://en.wikipedia.org/wiki/Politics_of_Bangladesh" style="color:blue">https://en.wikipedia.org/wiki/Politics_of_Bangladesh</td>
                 <td class="sCell3">Learn more about Bangladesh's Hybrid Regime in Bengali Politics!</td>
              </tr>
              </table>
        <br><br>
        
        <button class="button3" onclick="upload()">Upload</button>

        <button class="button3_2" onclick="download()">Download</button>
        
        <center>
               <label>Select File Type</label><br><br>
               
               <select id="fileType">
                      <option value="xml">XML</option>
                      <option value="json">JSON</option>
                      <option value="csv">CSV</option>
               </select>	 
        </center>
        <br><br>
        
        <center><p id="demo"></p></center>
        <table id="sTable2"></table>
        <br><br><br><a id="db"></a>
   </div>
   
   <script>			  
      function selectR(clicked_row)
       {
         var r = document.getElementById(clicked_row);
        var cb = r.cells[0].getElementsByTagName("input")[0];
           
         if(cb.checked == true)
        {
           r.className = "selected";
        }else
         {
            r.className = "r3";
         }
      }
      
      function upload()
      {		
         var f = document.getElementById("fileType").value;
        
        if(f == "xml")
        {
           xmlUpload();
        }else if(f == "json")
         {
           jsonUpload();
         }else
          {
             csvUpload();
          }
      }
      
      function download()
      {		
         var f = document.getElementById("fileType").value;
        
        if(f == "xml")
        {
           xmlDownload();
        }else if(f == "json")
         {
           jsonDownload();
         }else
          {
             csvDownload();
          }
      }
  
      function xmlUpload()
      {
         var xhttp = new XMLHttpRequest();
             xhttp.onreadystatechange = function() 
        {
                if(this.readyState == 4 && this.status == 200) 
           {
                   myFunction(this);
                }
             };
      
             xhttp.open("GET", "Results_X.xml", true);
             xhttp.send();

             function myFunction(xml) 
        {
                var i;
                var xmlDoc = xml.responseXML;
                var tr = "<tr><th>Title</th><th>URL</th><th>Description</tr>";
                var x = xmlDoc.getElementsByTagName("result");
           
                for(i = 0; i < x.length; i++) 
           { 
                   tr += "<tr class='r3'><td id='sCell'>" +
                   x[i].getElementsByTagName("title")[0].childNodes[0].nodeValue + "</td><td id='sCell'>" +
                   x[i].getElementsByTagName("url")[0].childNodes[0].nodeValue + "</td><td id='sCell'>" +
             x[i].getElementsByTagName("description")[0].childNodes[0].nodeValue + "</td></tr>";
                }
           
                document.getElementById("sTable2").innerHTML = tr;
           document.getElementById("demo").innerHTML = "Uploaded XML Results";
             }
      }
      
      function jsonUpload()
        {
             $.getJSON('Results_J.json', function(data) 
        {
           var tr = "<tr><th>Title</th><th>URL</th><th>Description</th></tr>";
           
                $.each(data.Result, function(i, r) 
           {
                   tr += "<tr class='r3'><td id='sCell'>" + 
             r.title + "</td><td id='sCell'>" + 
             r.url + "</td><td id='sCell'>" + 
             r.description + "</td></tr>";
                });
           
           $('#sTable2').html(tr);
           $('#demo').text("Uploaded JSON Results");
             });
          }
      
      function csvUpload()
      {
          $(document).ready(function()
         {
                $.ajax(
           {
                   url:"Results_C.csv",
                   dataType:"text",
                   success:function(data)
                   {
                      var Result = data.split(/\r?\n|\r/);
                      var tr = "<tr><th>Title</th><th>URL</th><th>Description</th></tr>";
             
                      for(var i = 0; i < Result.length; i++)
                      {
                         var td = Result[i].split(",");
               
                         tr += "<tr class='r3'><td id='sCell'>" + 
                   td[0] + "</td><td id='sCell'>" + 
                   td[1] + "</td><td id='sCell'>" + 
                   td[2] + "</td></tr>";
                      }
             
                      $('#sTable2').html(tr);
               $('#demo').text("Uploaded CSV Results");
                   }
                });
             });
      }
      
      function xmlDownload()
       {
        var t = document.getElementById("sTable");
         var x = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<search_results>\n";
        
             for(var i = 0; i < t.rows.length; i++) 
        {
                if(t.rows[i].className == "selected")
           {
              x += "<result>\n" +
             "<title>" + t.rows[i].cells[0].getElementsByTagName("p")[0].innerHTML + "</title>\n" +
                   "<url>" + t.rows[i].cells[1].getElementsByTagName("a")[0].text + "</url>\n" +
                   "<description>" + t.rows[i].cells[2].innerHTML + "</description>\n</result>\n";
           }
             }
        
        x += "</search_results>";
         var a = document.getElementById("db");
        
             var blob = new Blob([x], 
        {
                type: "text/plain;charset=utf-8"
             });

             a.href = window.URL.createObjectURL(blob);
             a.download = "Results_X.xml";
        a.click();
             window.URL.revokeObjectURL(url);

             function printFile(file) 
          {
                var reader = new FileReader();
                reader.readAsText(file);
             }
       }
      
      function jsonDownload()
       {
        var t = document.getElementById("sTable");
         
             var baseOBJ = {
                 Result: []
             };

             for(var i = 0; i < t.rows.length; i++) 
        {
                if(t.rows[i].className == "selected")
           {
              var rowContents = {};
                   rowContents.title = t.rows[i].cells[0].getElementsByTagName("p")[0].innerHTML;
                   rowContents.url = t.rows[i].cells[1].getElementsByTagName("a")[0].text;
                   rowContents.description = t.rows[i].cells[2].innerHTML;
             baseOBJ.Result.push(rowContents);
           }
             }
        
         var a = document.getElementById("db");
        
             var blob = new Blob([JSON.stringify(baseOBJ)], 
        {
                type: "text/plain;charset=utf-8"
             });

             a.href = window.URL.createObjectURL(blob);
             a.download = "Results_J.json";
        a.click();
             window.URL.revokeObjectURL(url);

             function printFile(file) 
          {
                var reader = new FileReader();
                reader.readAsText(file);
             }
      }
      
      function csvDownload()
       {
        var t = document.getElementById("sTable");
             var x = "";
        
             for(var i = 0; i < t.rows.length; i++) 
        {
                if(t.rows[i].className == "selected")
           {
              if(i != t.rows.length - 1)
             {
                 x += t.rows[i].cells[0].getElementsByTagName("p")[0].innerHTML + "," +
                      t.rows[i].cells[1].getElementsByTagName("a")[0].text + "," +
                      t.rows[i].cells[2].innerHTML + "\n";
             }else
              {
                x += t.rows[i].cells[0].getElementsByTagName("p")[0].innerHTML + "," +
                      t.rows[i].cells[1].getElementsByTagName("p")[0].text + "," +
                      t.rows[i].cells[2].innerHTML;
              }
           }
             }
        
        var a = document.getElementById("db");
        
             var blob = new Blob([x], 
        {
                type: "text/plain;charset=utf-8"
             });

             a.href = window.URL.createObjectURL(blob);
             a.download = "Results_C.csv";
        a.click();
             window.URL.revokeObjectURL(url);

             function printFile(file) 
          {
                var reader = new FileReader();
                reader.readAsText(file);
             }
       }
   </script>
  </body>
  </html>
